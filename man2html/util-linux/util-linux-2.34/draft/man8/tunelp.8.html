<HTML>
  <HEAD>
  <META CHARSET="UTF-8"/>
  <META HTTP-QUIV="Content-Type" CONTENT="text/html; charset=UTF-8"/>
  <LINK REL="stylesheet" TYPE="text/css"
	    HREF="../../../../css/jm-draft.css"/>
  <TITLE>Manpage of TUNELP</TITLE>
</HEAD><BODY>
<H1>TUNELP</H1>
Section: System Administration (8)<BR>Updated: October 2011<BR><A HREF="#index">Index</A>
<A HREF="https://github.com/ysatoautonomous/jm-draft/wiki">Return to Main Contents</A><HR>


<A NAME="lbAB">&nbsp;</A>
<H2>名前</H2>


tunelp - lp デバイスへのパラメータの設定

<A NAME="lbAC">&nbsp;</A>
<H2>書式</H2>

<B>tunelp</B>

[options]
<I>device</I>


<A NAME="lbAD">&nbsp;</A>
<H2>説明</H2>






<B>tunelp</B> は、よりよいパフォーマンスを得るために
(あるいはそのままでは動作しないプリンターを動作させるために)、
/dev/lp<I>?</I> デバイスに各種パラメータを設定する。
引数無しで起動すると、デバイスが使用している割り込み番号などを出力する。
引数を指定すると、その引数に従ってデバイスの特性を設定する。

<A NAME="lbAE">&nbsp;</A>
<H2>オプション</H2>

<DL COMPACT>
<DT><B>-i</B>, <B>--irq</B> <I>argument</I><DD>



このオプションは、パラレルポートが使用する IRQ を指定する。
IRQ に 0 以外の値を指定すると、-t および -c オプションは無効になる。
ポートが IRQ を使用しない場合にこのオプションを指定すると、
プリントされなくなる。






この場合に

<B>tunelp -i 0</B>

とすると、再び割り込み無しの制御 (ポーリング) を行うように設定され、
プリンタが再度動作するようになる。
一般に、パラレルポートが割り込みをサポートしている場合、
割り込みを使った方が印刷動作は早く、効率良く、好ましい結果となる。
<DT><DD>




カーネル 2.1.131 以降では IRQ は parport ドライバで扱われることになったため、
このオプションは無効となった。



parport に関する詳細は
<I>/usr/src/linux/Documentation/parport.txt</I>

を参照すること。
<DT><B>-t</B>, <B>--time</B> <I>milliseconds</I><DD>








プリンタが文字を受け取れなかったとき、
プリンタドライバーは -c オプションで指定した回数までデータを再送するが、
それでも送信が成功しないと、ドライバはこのオプションで指定した
時間だけ待つ。
時間は jiffy 単位で指定する。デフォルトでは、この値は 
10 である。できる限り早く印刷したい場合、システムの負荷を
気にしないなら、この値を 0 にしても構わない。
プリンタへの印字速度を気にしないなら、500 (5 秒)というのは妥当な値で、
システムの負荷をとても低く押えることができる。
グラフィクスの印刷をするときには、
テキスト印字のときに比べ、より小さな値 (およそ 10 分の 1 ぐらい)
にすると最大の性能が得られるだろう。
<DT><B>-c</B>, <B>--chars</B> <I>characters</I><DD>








このオプションは、-t <I>&lt;TIME&gt;</I> で指定した時間待つ前に、
何回プリンターに出力を試みるかを指定する。
数字は、プリンターにデータを送る試行回数を示す。
ポーリングモードのプリンタには、120 程度が適当だろう。
デフォルトでは 1000 である
(こうしないと動きがぎくしゃくするプリンターがあるため)。
割り込みを使う場合は、 CPU の能力を最大限に生かすためには
この値を `1' に <I>しなければならない</I>。
とても高速なプリンターを持っているなら、
ポーリングモードで使う場合でも 10 で大丈夫だろう。
<I>本当に</I>古いプリンターの場合、この値をずっと増やす必要がある。
<DT><DD>


-t <I>&lt;TIME&gt;</I> を 0 にすることは、 -c <I>&lt;CHARS&gt;</I> を無限大にするのと
同じ意味となる。
<DT><B>-w</B>, <B>--wait</B> <I>milliseconds</I><DD>






このオプションは、storobe シグナルを扱う時のウェイトを
マイクロ秒単位で指定する。
ほとんどのプリンタは非常に短いタイミングでも良いようだが、
プリンターによっては長いタイミングを必要とすることもある。
このため、デフォルトの 1 から徐々に増加させながら、そのプリンター
で印刷できるタイミングを求めることになる。このようなタイミングの
調整をすると、長いケーブルでも使えるようになる。
また、もしプリンターが十分早く、コンピューターが十分遅い場合は、
値を 0 にすることも可能である。
<DT><B>-a</B>, <B>--abort</B> <I>&lt;on|off&gt;</I><DD>





このオプションは、プリンターのエラー時にアボートするかどうかを
指定する。
デフォルトではアボートしない。コンピュータの前に座っているなら、
エラーをみてそれを直し、プリンターに引続き出力させることを
望むだろう。
一方、コンピュータから離れているときには、
プリンターがレディ状態でないことをプリンタースプーラが検出すると、
すぐに終了してそのことをメールで知らせてくれるほうが良いこともある。
好きな方を選択すること。
<DT><B>-o</B>, <B>--check-status</B> <I>&lt;on|off&gt;</I><DD>





このオプションは、-a に良く似ている。デバイスを
<B><A HREF="../man2/open.2.html">open</A></B>(2)

する時に、デバイスがオンライン状態で、
紙切れなどのエラーが通知されないかをチェックする。
これは、ほとんどのバージョンの lpd に対して正しい設定である。
<DT><B>-C</B>, <B>--careful</B> <I>&lt;on|off&gt;</I><DD>




このオプションは、特別な (&quot;注意深い&quot;) エラーチェックを追加する。
このオプションを on にすると、プリンタードライバーはプリンターが
オンライン状態かどうか確認し、紙切れなどのエラーを通知してこない
ことを確認してからデータを送信する。
この機能は、オフライン状態でもデータを受け付けるように
見えるプリンタを使っている場合には、特に有効である。
<DT><DD>


注意: 2.1.131 以降のカーネルではこれがデフォルトとなったため、
このオプションは古いものである。
<DT><B>-s</B>, <B>--status</B><DD>



このオプションは、現在のプリンターのステータスを返す。
ステータスは、0 から 255 までの 10 進数と、有効なフラグのリストである。
このオプションが指定されると、-q off (現在の IRQ を表示しない) も
指定されたものとして処理される。
<DT><B>-r</B>, <B>--reset</B><DD>


このオプションは、ポートをリセットする。
このオプションを使用するには、
Linux の カーネルのバージョンが、1.1.80 以降である必要がある。
<DT><B>-q</B>, <B>--print-irq</B> <I>&lt;on|off&gt;</I><DD>

現在の IRQ の設定を表示するかどうかを設定する。

</DL>
<A NAME="lbAF">&nbsp;</A>
<H2>注意</H2>






<B>-o</B>,

<B>-C</B>,

<B>-s</B>

オプションを使用するには、Linux のカーネルのバージョンが、
1.1.76 以降である必要がある。
<P>



<B>-C</B>

オプションを使用するためには Linux バージョンが 2.1.131 より前である必要がある。

<A NAME="lbAG">&nbsp;</A>
<H2>ファイル</H2>

<I>/dev/lp?</I>

<BR>

<I>/proc/parport/*/*</I>


<A NAME="lbAH">&nbsp;</A>
<H2>入手方法</H2>





tunelp  コマンドは util-linux パッケージの一部であり、

Linux Kernel Archive

から入手できる。
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">名前</A><DD>
<DT><A HREF="#lbAC">書式</A><DD>
<DT><A HREF="#lbAD">説明</A><DD>
<DT><A HREF="#lbAE">オプション</A><DD>
<DT><A HREF="#lbAF">注意</A><DD>
<DT><A HREF="#lbAG">ファイル</A><DD>
<DT><A HREF="#lbAH">入手方法</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 16:12:19 GMT, April 03, 2020
</BODY>
</HTML>
