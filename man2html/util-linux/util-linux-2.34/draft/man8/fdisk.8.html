<HTML>
  <HEAD>
  <META CHARSET="UTF-8"/>
  <META HTTP-QUIV="Content-Type" CONTENT="text/html; charset=UTF-8"/>
  <LINK REL="stylesheet" TYPE="text/css"
	    HREF="../../../../css/jm-draft.css"/>
  <TITLE>Manpage of FDISK</TITLE>
</HEAD><BODY>
<H1>FDISK</H1>
Section: System Administration (8)<BR>Updated: February 2016<BR><A HREF="#index">Index</A>
<A HREF="https://github.com/ysatoautonomous/jm-draft/wiki">Return to Main Contents</A><HR>

<P>

<A NAME="lbAB">&nbsp;</A>
<H2>名前</H2>


fdisk - ディスクパーティションテーブルを操作する
<P>

<A NAME="lbAC">&nbsp;</A>
<H2>書式</H2>

<B>fdisk</B>

[options]
<I>device</I>

<P>
<B>fdisk -l</B>

[<I>device</I>...]

<P>

<A NAME="lbAD">&nbsp;</A>
<H2>説明</H2>



<B>fdisk</B>

はパーティションテーブルの作成と操作を行う対話型のプログラムである。

このプログラムは GPT, MBR, Sun, SGI, BSD パーティションテーブルを操作できる。
<P>





ブロックデバイスは、一つ以上の論理的なディスクに分割することができる。
これは

と呼ばれる。この分割に関する情報は、ディスクのセクタ 0 に置かれる
<I>パーティションテーブル</I>

に保存される。

(BSD の世界では、それぞれ「ディスクスライス (disk slice)」、
「ディスクラベル (disklabel)」といった用語が用いられる。)
<P>

すべてのパーティション分割は、デフォルトでは I/O 制限 (トポロジー) によって操作される。






<B>fdisk</B>

はディスクレイアウトを 4K セクタサイズで最適化し、
MBR と GPT では最近のデバイスについて配置オフセットを使うことができる。
<B>fdisk</B> のデフォルトをデフォルト値 (例えば、開始と最終パーティションセクタ)
として従うのは、常に良い考えである。
また、+/-&lt;size&gt;{M,G,...} 形式で指定されたパーティションサイズは、
常にデバイスのプロパティに応じて配置される。
<P>



CHS (シリンダ-ヘッダ-セクタ) アドレス指定は廃れているので、デフォルトでは使用しないこと。
SSD または 4K セクタのデバイスについて、
&quot;fdisk -S &lt;n&gt; -H &lt;n&gt;&quot; のアドバイスをしている古い記事や推奨事項には、従ってはいけない。
<P>







<B><A HREF="../man8/partx.8.html">partx</A></B>(8)

はスクリプトからディスクレイアウトを表示するために、
リッチなインタフェースを提供している。
<B>fdisk</B>

は大部分は人が使うためにデザインされている。
<B>fdisk</B>

の出力の後方互換は保証されていない。
入力 (コマンド) は常に後方互換であるべきだろう。
<P>

<A NAME="lbAE">&nbsp;</A>
<H2>オプション</H2>

<DL COMPACT>
<DT><B>-b</B>, <B>--sector-size</B> <I>sectorsize</I><DD>





ディスクのセクタサイズを指定する。
指定できる値は 512, 1024, 2048, 4096 のいずれかである。
(最近のカーネルはセクタサイズをうまく扱える。
このオプションを用いるのは、カーネルが古い場合や、
カーネルの考えを上書きする場合だけにすること。)
util-linux-2.17 以降で、<B>fdisk</B> は論理セクタサイズと
物理セクタサイズを異なる値にする。
このオプションは両方のセクタサイズを
<I>sectorsize</I>

にする。
<DT><B>-B</B>, <B>--protect-boot</B><DD>


新しいディスクラベルを作成するときに、
最初のディスクセクタを消去しない。
この機能は GPT と MBR でサポートされる。
<DT><B>-c</B>, <B>--compatibility</B>[=<I>mode</I>]<DD>





互換モード 'dos' または 'nondos' を指定する。
デフォルトは non-DOS モードである。
後方互換のため、このオプションは
<I>mode</I> 引き数を指定せずに使うことができる。-- その場合に、このデフォルトが使われる。
オプションの <I>mode</I> 引き数は、<B>-c</B> オプションと
スペースを開けて使うことができない点に注意すること。
正しい形式は、例えば '-c=dos' である。
<DT><B>-h</B>, <B>--help</B><DD>

ヘルプを表示して、終了する。
<DT><B>-L</B>, <B>--color</B>[=<I>when</I>]<DD>




出力をカラー表示する。
オプションの引き数 <I>when</I> は、
<B>auto</B>, <B>never</B>, <B>always</B> である。
<I>when</I> 引き数が省略された場合、デフォルトは <B>auto</B> である。
カラー表示は無効化できる。
現在の組み込みのデフォルトは、
<B>--help</B> 出力を参照すること。
<B>COLORS</B> セクションも参照すること。
<DT><B>-l</B>, <B>--list</B><DD>




指定したデバイスのパーティションテーブルをリストして終了する。
デバイスを何も指定しないと、
<I>/proc/partitions</I>

があれば、そこにあるデバイスを対象にする。
<DT><B>-o</B>,<B> --output </B><I>list</I>

<DD>



出力する列を指定する。
サポートされる列のリストを取得するには、
<B>--help</B>

を使うこと。
<P>


デフォルトの列のリストは、<I>list</I> を
<I>+list</I> の形式で指定することで拡張できる (例えば <B>-o +UUID</B>)。
<DT><B>-s</B>, <B>--getsz</B><DD>



指定されたブロックデバイスを 512 バイトセクタ単位でサイズを表示する。
このオプションは<B>廃れており</B>、
<B><A HREF="../man1/blockdev.1.html">blockdev</A></B>(1)

を使うべきである。
<DT><B>-t</B>, <B>--type</B> <I>type</I><DD>


指定された <I>type</I> のディスクラベルのみを有効にして、
他のすべてのタイプを無効にする。
<DT><B>-u</B>, <B>--units</B>[=<I>unit</I>]<DD>



パーティションテーブルをリストする際に、サイズを「セクタ数」または
「シリンダ数」で表示する。
デフォルトではサイズをセクタ数で表示する。
後方互換のため、このオプションは
<I>unit</I> 引き数を指定せずに使うことができる。-- その場合に、このデフォルトが使われる。


オプションの <I>unit</I> 引き数は、<B>-u</B> オプションと
スペースを開けて使うことができない点に注意すること。
正しい形式は、例えば '-u=cylinders' である。
<P>
<DT><B>-C</B>, <B>--cylinders</B> <I>number</I><DD>

ディスクのシリンダ数を指定する。

なぜこれを指定したいと思うのかは分からない。
<DT><B>-H</B>, <B>--heads</B> <I>number</I><DD>



ディスクのヘッダ数を指定する
(もちろん物理的なヘッダ数ではなく、
パーティションテーブルに使われるヘッダ数である)。
適切な値は 255 または 16 である。
<DT><B>-S</B>, <B>--sectors</B> <I>number</I><DD>



ディスクの 1 トラック当りのセクタ数を指定する
(もちろん物理的なセクタ数ではなく、
パーティションテーブルに使われるセクタ数である)。
適切な値は 63 である。
<P>
<DT><B>-w</B>, <B>--wipe</B> <I>when</I><DD>




衝突の可能性を避けるため、デバイスからファイルシステム、RAID、
パーティションテーブルの署名 (signature) を消去する。 
引き数 <I>when</I> は <B>auto</B>, <B>never</B>, <B>always</B> のいずれかである。
デフォルトは <B>auto</B> であり、対話モードの場合にのみ、署名が消去される。




新しいパーティションテーブルが作成される前に、
すべての場合において、検知された署名は警告メッセージで報告される。
<B><A HREF="../man8/wipefs.8.html">wipefs</A></B>(8)

コマンドを参照すること。
<P>
<DT><B>-W</B>, <B>--wipe-partition</B> <I>when</I><DD>









衝突の可能性を避けるため、新しく作成されたパーティションから
ファイルシステム、RAID、パーティションテーブルの署名を消去する。 
引き数 <I>when</I> は <B>auto</B>, <B>never</B>, <B>always</B> のいずれかである。
デフォルトは <B>auto</B> であり、対話モードの場合にユーザが承諾した後に、署名が消去される。
新しいパーティションが作成される前に、
すべての場合において、検知された署名は警告メッセージで報告される。
<B><A HREF="../man8/wipefs.8.html">wipefs</A></B>(8)

コマンドを参照すること。
<P>
<DT><B>-V</B>, <B>--version</B><DD>

バージョン情報を表示して、終了する。
<P>

</DL>
<A NAME="lbAF">&nbsp;</A>
<H2>デバイス</H2>







<I>device</I>

は、通常は /dev/sda, /dev/sdb などである。
デバイス名はディスク全体を示す。
libata (Linux カーネル内部で ATA ホストコントローラとデバイスをサポートするライブラリ) を
使っていない古いシステムでは、IDE と SCSI ディスクで違いがある。
この場合、デバイス名が /dev/hd* (IDE) と /dev/sd* (SCSI) になる。
<P>





<I>パーティション (partition)</I>

はデバイス名の後にパーティション番号が続く。
例えば、/dev/sda1 は、システムの最初のハードディスクの最初のパーティションである。
Linux カーネルのドキュメント (Documentation/devices.txt ファイル) も参照すること。
<P>

<A NAME="lbAG">&nbsp;</A>
<H2>サイズ</H2>



「最終セクタ」ダイアログで、パーティションサイズを、
セクタ数または +/-&lt;size&gt;{K,B,M,G,...} 形式で受け付ける。
<P>



サイズの前に '+' を付けると、パーティションの最初のセクタからの相対位置として解釈される。
サイズの前に '-' を付けると、上限 (パーティションの最終セクタ) からの相対位置として解釈される。
<P>




サイズをバイトではなく、数値と倍数のサフィックス KiB=1024, MiB=1024*1024,
さらに GiB, TiB, PiB, EiB, ZiB, YiB を続けて指定できる。
&quot;iB&quot; はオプションであり、例えば &quot;K&quot; は &quot;KiB&quot; と同じ意味である。
<P>


相対サイズはデバイスの I/O 制限に基づいて常に配置される。
+/-&lt;size&gt;{K,B,M,G,...} 形式が推奨される。
<P>



後方互換のため、fdisk はサフィックス
KB=1000, MB=1000*1000, さらに GB, TB, PB, EB, ZB, YB を受け付ける。
これらの 10^N サフィックスは廃れている。
<P>

<A NAME="lbAH">&nbsp;</A>
<H2>スクリプトファイル</H2>





<B>fdisk</B>

は sfdisk 互換のスクリプトファイルを ('I' コマンドで) 読み込むことができる。
スクリプトファイルはメモリ内のパーティションテーブルとして適用され、
デバイスに書き込む前にパーティションテーブルを修正することができる。
<P>



逆に、現在のメモリ内のディスクレイアウトをコマンド 'O' でスクリプトに書き出すことができる。
<P>




スクリプトファイルは cfdisk, sfdisk, fdisk と他の libfdisk アプリケーションで
互換性がある。
より詳細は
<B><A HREF="../man8/sfdisk.8.html">sfdisk</A></B>(8)

を参照すること。
<P>

<A NAME="lbAI">&nbsp;</A>
<H2>ディスクラベル</H2>

<B>GPT (GUID Partition Table)</B>

<DL COMPACT><DT><DD>




GPT は、パーティションテーブルのレイアウトの、現在の標準である。
GPT は 64-bit 論理ブロックアドレス、チェックサム、UUID と
パーティション名を使い、無限のパーティション数が使える
(ただし、パーティション数は、多くのパーティション分割ツールで
たいてい 128 に制限されている)。
<P>




最初のセクタは GPT 仕様でも
<B>protective MBR</B>

として予約されている。
これは、MBR のみのパーティション分割ツールが、
GPT ディスクを誤認識して上書きするのを防止する。
<P>


GPT は、特に現在のハードウェアで UEFI ブートローダを使う場合に、
MBR より常に優れた選択肢である。
</DL>

<P>

<B>DOS 形式 (MBR)</B>

<DL COMPACT><DT><DD>






DOS 形式のパーティションテーブルは、パーティションの数に制限がない。
セクタ 0 には、4 つのパーティション
(「基本 (primary) パーティション」と呼ばれる) に関する情報が記述されている。
これら基本パーティションは、拡張 (extended) パーティションにすることもできる。
これは論理 (logical) パーティションの入れ物となる。
拡張パーティションにはディスクリプターが
セクタのリンクリストの形式で置かれ、
それぞれ対応する論理パーティションの情報を保持する。
4 つの基本パーティションには (存在していなくても)
番号 1-4 が割り当てられる。論理パーティションの番号は 5 から始まる。
<P>












DOS 形式のパーティションテーブルでは、それぞれのパーティションの
スタートオフセットとサイズは、二種類の方法で保存される。
一つはセクタの絶対数 (32 ビット) であり、
もう一つは「
「<B>シリンダ数/ヘッド数/セクタ数 (C/H/S)</B>」

の三つの組み合わせである (それぞれ 10, 8, 6 ビット)。
前者には問題は特になく、512 バイトのセクタで 2 TB を扱うことができる。
後者には二種類の問題がある。まず第一に、この C/H/S を与えるためには、
ヘッド数とトラックあたりのセクタ数を知っていなければならない。
第二に、これらの数値がわかったとしても、24 ビットでは足りないかもしれない。
DOS は C/H/S だけを用いる。Windows は両方を用いる。
Linux では C/H/S は使わない。
<B>C/H/S アドレス指定は廃れているので、</B>

今後の fdisk のバージョンではサポートされないかもしれない。
<P>



<B>DOS 互換パーティションを使いたい場合、DOS モードのセクションを読んでほしい。</B>

<B>fdisk</B>

はデフォルトではシリンダ境界を考慮しない。
</DL>

<P>

<B>BSD/Sun 形式</B>

<DL COMPACT><DT><DD>



BSD/SUN 形式のディスクラベルは 8 パーティションを扱うことができる。
そのうち 3 番目は「ディスク全体」を表すパーティションとなる。
先頭セクタを実際に利用するパーティション (スワップなど) を
シリンダ 0 から割り当ててはならない。ディスクラベルを破壊してしまう。



<B>BSD ラベル</B>

は通常は DOS パーティション内でネストされる。
</DL>

<P>

<B>IRIX/SGI 形式</B>

<DL COMPACT><DT><DD>









IRIX/SGI 形式のディスクラベルは、16 パーティションを記述できる。
そのうちの第 11 番目は `volume' 全体に対応するパーティションであり、
第 9 番目は `volume header' とラベル付けされる。
volume header はパーティションテーブルの領域もカバーする。
つまり volume header はブロック 0 から始まり、デフォルトでは
シリンダ 5 までの部分を占める。volume header の残りの部分は
ヘッダディレクトリエントリに用いられる。
volume header は他のパーティションと重なってはならない。
またパーティションテーブルが含まれているので、形式を変更したり、
ファイルシステムを作ったりもできない。
このラベル形式は、IRIX/SGI マシンで動作している Linux か、
IRIX/SGI ディスクを Linux で使う場合に限って用いること。
</DL>

<P>


パーティションテーブルが更新された場合、
sync() と ioctl(BLKRRPART) (ディスクからパーティションテーブルの再読み込み) が、　
終了前に実行される。
<P>

<A NAME="lbAJ">&nbsp;</A>
<H2>DOS 6.x 向けの警告</H2>





<B>ここに書かれていることは古い点に注意すること。</B>

<B>現在のオペレーティングシステムではジオメトリとシリンダに注意する必要がない。</B>

<B>DOS 互換のパーティションを本当に使いたいなら、</B>

<B>'-c=dos -u=cylinders' fdisk コマンドラインオプションで、</B>

<B>DOS モードとシリンダを有効にする必要がある。</B>

<P>






DOS 6.x の FORMAT コマンドはパーティションのデータエリアの
第一セクタからある種の情報を検索し、
これをパーティションテーブルにある情報より信頼できるものとして扱う。
DOS の FORMAT は、容量が変更されたときには最初の 512 バイト分の
データ領域が DOS 版 FDISK によってクリアされていることを仮定している。
DOS の FORMAT はこの拡張情報を /U フラグを指定した場合でも見ようとする
-- これは DOS FORMAT と DOS FDISK のバグであると我々は考える。
<P>









結局のところ、cfdisk や fdisk を用いて DOS パーティションの容量を
変更したときは、DOS FORMAT を使ってパーティションをフォーマットする前に
<B>dd</B>

を使って先頭の 512 バイトを 0 で埋めなければならない、というわけである。
例えば cfdisk を用いて /dev/hda1 の DOS パーティションの
テーブルエントリを作成した場合には、(fdisk または cfdisk を終了し、
Linux をリブートしてパーティションテーブルの情報を有効にしたあとで)
先頭の 512 バイトをゼロにするために
&quot;dd if=/dev/zero of=/dev/hda1 bs=512 count=1&quot;
などと実行する必要がある。
<P>






<B>fdisk</B>

は通常はディスクジオメトリを自動的に取得する。
これは物理ディスクジオメトリである必要はないが、
MS-DOS はパーティションテーブルに、このディスクジオメトリを使う
(実際、最近のディスクは物理ジオメトリのようなものを持っておらず、
シンプルなシリンダ数/ヘッダ数/セクタ数の形式で記述できるものではない)。
<P>






通常は、デフォルトですべてうまくいき、ディスク上のシステムが
Linux のみであれば、何も問題ない。
しかし、ディスクを他のオペレーティングシステムと共有しなければならない
場合、少なくとも 1 つのパーティションを別のオペレーティングシステムから
fdisk を実行するのは良い考えである。
Linux がブートする時、パーティションテーブルを見て、
他のシステムと協調するために、
どのような (仮想の) ジオメトリが必要かを推定しようとする。
<P>





DOS モードでパーティションテーブルを表示する場合、
パーティションテーブルのエントリの整合性チェックが実行される。
このチェックでは、物理と論理の開始と終了ポイントが等しいかを検証し、
(最初のパーティションを除いて) 各パーティションが
シリンダ境界で開始と終了しているかを検証する。
<P>




MS-DOS のいくつかのバージョンでは、シリンダ境界で始まらず、
最初のシリンダのセクタ 2 で始まるように、最初のパーティションを作成する。
シリンダ 1 で始まるパーティションは、シリンダ境界で始まることができず、
マシンに OS/2 がない限り、面倒事を起こす可能性がある。
<P>



できるだけ問題を起こしたくなければ、常に OS 固有のパーティション
テーブル用プログラムを用いることである。
例えば DOS パーティションは DOS FDISK プログラムで作り、
Linux のパーティションは Linux の fdisk または cfdisk で作るべきなのである。

<A NAME="lbAK">&nbsp;</A>
<H2>カラー表示</H2>


暗黙のカラー表示は、空ファイル <I>/etc/terminal-colors.d/fdisk.disable</I> を
使うことで無効化できる。
<P>






カラー表示の設定のより詳細は、
<B><A HREF="../man5/terminal-colors.d.5.html">terminal-colors.d</A></B>(5)

を参照すること。
<B>fdisk</B>

でサポートされる論理的なカラー名は以下の通りである:
<DL COMPACT>
<DT><B>header</B>

<DD>

出力テーブルのヘッダ。
<DT><B>help-title</B>

<DD>

ヘルプセクションのタイトル。
<DT><B>warn</B>

<DD>

警告メッセージ。
<DT><B>welcome</B>

<DD>

「ようこそ」のメッセージ。
<P>

</DL>
<A NAME="lbAL">&nbsp;</A>
<H2>作者</H2>


Karel Zak

<BR>


Davidlohr Bueso

<BR>

<P>



元々のバージョンは、Andries E. Brouwer, A. V. Le Blanc などによって書かれた。
<P>

<A NAME="lbAM">&nbsp;</A>
<H2>環境変数</H2>

<DL COMPACT>
<DT>FDISK_DEBUG=all<DD>

fdisk のデバッグ出力を有効にする。
<DT>LIBFDISK_DEBUG=all<DD>

libfdisk のデバッグ出力を有効にする。
<DT>LIBBLKID_DEBUG=all<DD>

libblkid のデバッグ出力を有効にする。
<DT>LIBSMARTCOLS_DEBUG=all<DD>

libsmartcols のデバッグ出力を有効にする。
<DT>LIBSMARTCOLS_DEBUG_PADDING=on<DD>

視認可能な埋め文字を使う。
LIBSMARTCOLS_DEBUG を有効にする必要がある。
<P>

</DL>
<A NAME="lbAN">&nbsp;</A>
<H2>関連項目</H2>

<B><A HREF="../man8/cfdisk.8.html">cfdisk</A></B>(8),

<B><A HREF="../man8/mkfs.8.html">mkfs</A></B>(8),

<B><A HREF="../man8/partx.8.html">partx</A></B>(8),

<B><A HREF="../man8/sfdisk.8.html">sfdisk</A></B>(8)

<P>

<A NAME="lbAO">&nbsp;</A>
<H2>入手方法</H2>



fdisk コマンドは util-linux パッケージの一部であり、
<A HREF="https://www.kernel.org/pub/linux/utils/util-linux/">https://www.kernel.org/pub/linux/utils/util-linux/</A>
から入手できる。
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">名前</A><DD>
<DT><A HREF="#lbAC">書式</A><DD>
<DT><A HREF="#lbAD">説明</A><DD>
<DT><A HREF="#lbAE">オプション</A><DD>
<DT><A HREF="#lbAF">デバイス</A><DD>
<DT><A HREF="#lbAG">サイズ</A><DD>
<DT><A HREF="#lbAH">スクリプトファイル</A><DD>
<DT><A HREF="#lbAI">ディスクラベル</A><DD>
<DT><A HREF="#lbAJ">DOS 6.x 向けの警告</A><DD>
<DT><A HREF="#lbAK">カラー表示</A><DD>
<DT><A HREF="#lbAL">作者</A><DD>
<DT><A HREF="#lbAM">環境変数</A><DD>
<DT><A HREF="#lbAN">関連項目</A><DD>
<DT><A HREF="#lbAO">入手方法</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 14:52:27 GMT, April 18, 2020
</BODY>
</HTML>
