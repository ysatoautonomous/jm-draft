<HTML>
  <HEAD>
  <META CHARSET="UTF-8"/>
  <META HTTP-QUIV="Content-Type" CONTENT="text/html; charset=UTF-8"/>
  <LINK REL="stylesheet" TYPE="text/css"
	    HREF="../../../../css/jm-draft.css"/>
  <TITLE>Manpage of SWAPON</TITLE>
</HEAD><BODY>
<H1>SWAPON</H1>
Section: System Administration (8)<BR>Updated: October 2014<BR><A HREF="#index">Index</A>
<A HREF="https://github.com/ysatoautonomous/jm-draft/wiki">Return to Main Contents</A><HR>



<A NAME="lbAB">&nbsp;</A>
<H2>名前</H2>

swapon, swapoff - デバイスやファイルへのページング、スワッピングを有効 / 無効にする

<A NAME="lbAC">&nbsp;</A>
<H2>書式</H2>

<B>swapon</B>

[options]
[<I>specialfile</I>...]

<BR>

<B>swapoff</B>

[<B>-va</B>]

[<I>specialfile</I>...]


<A NAME="lbAD">&nbsp;</A>
<H2>説明</H2>



<B>swapon</B>

は、ページング (paging) やスワッピング (swapping) を行うデバイスを
指定するために用いられる。
<P>







使用されるデバイスまたはファイルは、
<I>specialfile</I>

引き数で指定される。
<B>-L</B><I> label</I>

または
<B>-U</B><I> uuid</I>

という形式で、ラベルまたは uuid でデバイスを指定することができる。
<P>





<B>swapon</B>

の呼び出しは、通常システムのブートスクリプトで行われる。
普通はここですべてのスワップデバイスを有効にし、ページング
やスワッピングが複数のデバイスやファイルにまたがってインターリーブ 
(interleave) 動作できるようにする。
<P>

通常は
<B>swapon -a</B>

の書式で実行されることが多い。
<DL COMPACT>
<DT><DD>
<B>swapoff</B>

disables swapping on the specified devices and files.
When the
<B>-a</B>

flag is given, swapping is disabled on all known swap devices and files
(as found in
<I>/proc/swaps</I>

or
<I>/etc/fstab</I>).

<P>

</DL>
<A NAME="lbAE">&nbsp;</A>
<H2>オプション</H2>

<DL COMPACT>
<DT><B>-a</B>,<B> --all</B>

<DD>




<I>/etc/fstab</I>

中で ``swap'' マークが付いているスワップデバイスをすべて有効にする。
ただし ``noauto'' オプションが付いているものは除く。
スワップとして既に使われているデバイスは、黙ってスキップされる。
<DT><B>-d</B>,<B> --discard</B>[<B>=</B><I>policy</I>]

<DD>
Enable swap discards, if the swap backing device supports the discard or
trim operation.  This may improve performance on some Solid State Devices,
but often it does not.  The option allows one to select between two
available swap discard policies:
<B>--discard=once</B>

to perform a single-time discard operation for the whole swap area at swapon;
or
<B>--discard=pages</B>

to asynchronously discard freed swap pages before they are available for reuse.
If no policy is selected, the default behavior is to enable both discard types.
The
<I>/etc/fstab</I>

mount options
<B>discard</B>,

<B>discard=once</B>,

or
<B>discard=pages</B>

may also be used to enable discard flags.
<DT><B>-e</B>,<B> --ifexists</B>

<DD>






存在しないデバイスを黙ってスキップする。
The
<I>/etc/fstab</I>

mount option
<B>nofail</B>

may also be used to skip non-existing device.
<P>
<DT><B>-f</B>,<B> --fixpgsz</B>

<DD>
Reinitialize (exec mkswap) the swap space if its page size does not
match that of the current running kernel.
<B><A HREF="../man2/mkswap.2.html">mkswap</A></B>(2)

initializes the whole device and does not check for bad blocks.
<DT><B>-h</B>,<B> --help</B>

<DD>

ヘルプを表示して、終了する。
<DT><B>-L</B><I> label</I>

<DD>





指定された
<I>label</I>

のパーティションを使う。
(これを使用するためには
<I>/proc/partitions</I>

にアクセスする必要がある。)
<DT><B>-o</B>,<B> --options </B><I>opts</I>

<DD>
Specify swap options by an fstab-compatible comma-separated string.
For example:
<DL COMPACT><DT><DD>
<DL COMPACT><DT><DD>
<P>
<B>swapon -o pri=1,discard=pages,nofail /dev/sda2</B>

<P>
</DL>

The <I>opts</I> string is evaluated last and overrides all other
command line options.
</DL>

<DT><B>-p</B>,<B> --priority </B><I>priority</I>

<DD>

スワップデバイスの優先度 (priority) を指定する。










<I>priority</I>

は -1 から 32767 の間の数値である。
数値が大きいほど優先度が高い。
スワップ優先度の詳細な説明に関しては
<B><A HREF="../man2/swapon.2.html">swapon</A></B>(2)

を見よ。
<I>/etc/fstab</I>

のオプションフィールドに
<B>pri=</B><I>value</I>

を記述すれば、
<B>swapon -a </B>

の際にその値が用いられる。

優先度が定義されていない場合、デフォルトは -1 である。
<DT><B>-s</B>,<B> --summary</B>

<DD>



スワップの使用状況をデバイス毎に表示する。
&quot;cat /proc/swaps&quot; と等しい。
This output format is DEPRECATED in favour
of <B>--show</B> that provides better control on output data.
<DT><B>--show</B>[<B>=</B><I>column</I>...]

<DD>
Display a definable table of swap areas.  See the
<B>--help</B>

output for a list of available columns.
<DT><B>--output-all</B>

<DD>
Output all available columns.
<DT><B>--noheadings</B>

<DD>
Do not print headings when displaying
<B>--show</B>

output.
<DT><B>--raw</B>

<DD>
Display
<B>--show</B>

output without aligning table columns.
<DT><B>--bytes</B>

<DD>
Display swap size in bytes in
<B>--show</B>

output instead of in user-friendly units.
<DT><B>-U</B><I> uuid</I>

<DD>


指定された
<I>uuid</I>

のパーティションを使う。
<DT><B>-v</B>,<B> --verbose</B>

<DD>

詳細に表示する。
<DT><B>-V</B>,<B> --version</B>

<DD>

バージョン情報を表示して、終了する。

</DL>
<A NAME="lbAF">&nbsp;</A>
<H2>注意</H2>


<A NAME="lbAG">&nbsp;</A>
<H3>ホールのあるファイル</H3>

The swap file implementation in the kernel expects to be able to write to the
file directly, without the assistance of the filesystem.  This is a problem on
files with holes or on copy-on-write files on filesystems like Btrfs.
<P>
Commands like
<B><A HREF="../man1/cp.1.html">cp</A></B>(1)

or
<B><A HREF="../man1/truncate.1.html">truncate</A></B>(1)

create files with holes.  These files will be rejected by swapon.
<P>
Preallocated files created by
<B><A HREF="../man1/fallocate.1.html">fallocate</A></B>(1)

may be interpreted as files with holes too depending of the filesystem.
Preallocated swap files are supported on XFS since Linux 4.18.
<P>
The most portable solution to create a swap file is to use
<B><A HREF="../man1/dd.1.html">dd</A></B>(1)

and /dev/zero.
<A NAME="lbAH">&nbsp;</A>
<H3>Btrfs</H3>

Swap files on Btrfs are supported since Linux 5.0 on files with nocow attribute.
See the
<B><A HREF="../man5/btrfs.5.html">btrfs</A></B>(5)

manual page for more details.
<A NAME="lbAI">&nbsp;</A>
<H3>NFS</H3>


<B>NFS</B> 上の swap は動作しないかもしれない。
<A NAME="lbAJ">&nbsp;</A>
<H3>Suspend</H3>

<B>swapon</B>

automatically detects and rewrites a swap space signature with old software
suspend data (e.g. S1SUSPEND, S2SUSPEND, ...). The problem is that if we don't
do it, then we get data corruption the next time an attempt at unsuspending is
made.

<A NAME="lbAK">&nbsp;</A>
<H2>環境変数</H2>

<DL COMPACT>
<DT>LIBMOUNT_DEBUG=all<DD>

libmount デバッグ出力を有効にする。
<DT>LIBBLKID_DEBUG=all<DD>

libblkid デバッグ出力を有効にする。
<P>

</DL>
<A NAME="lbAL">&nbsp;</A>
<H2>関連項目</H2>

<B><A HREF="../man2/swapoff.2.html">swapoff</A></B>(2),

<B><A HREF="../man2/swapon.2.html">swapon</A></B>(2),

<B><A HREF="../man5/fstab.5.html">fstab</A></B>(5),

<B><A HREF="../man8/init.8.html">init</A></B>(8),

<B><A HREF="../man1/fallocate.1.html">fallocate</A></B>(1),

<B><A HREF="../man8/mkswap.8.html">mkswap</A></B>(8),

<B><A HREF="../man8/mount.8.html">mount</A></B>(8),

<B><A HREF="../man8/rc.8.html">rc</A></B>(8)


<A NAME="lbAM">&nbsp;</A>
<H2>ファイル</H2>

<BR>

<I>/dev/sd??</I>


標準のページングデバイス
<BR>

<I>/etc/fstab</I>


ファイルシステムを ascii で記述した表。

<A NAME="lbAN">&nbsp;</A>
<H2>履歴</H2>




<B>swapon</B>

コマンドは 4.0BSD から導入された。

<A NAME="lbAO">&nbsp;</A>
<H2>入手方法</H2>



swapon コマンドは util-linux パッケージの一部であり、
<A HREF="https://www.kernel.org/pub/linux/utils/util-linux/">https://www.kernel.org/pub/linux/utils/util-linux/</A>
から入手できる。
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">名前</A><DD>
<DT><A HREF="#lbAC">書式</A><DD>
<DT><A HREF="#lbAD">説明</A><DD>
<DT><A HREF="#lbAE">オプション</A><DD>
<DT><A HREF="#lbAF">注意</A><DD>
<DL>
<DT><A HREF="#lbAG">ホールのあるファイル</A><DD>
<DT><A HREF="#lbAH">Btrfs</A><DD>
<DT><A HREF="#lbAI">NFS</A><DD>
<DT><A HREF="#lbAJ">Suspend</A><DD>
</DL>
<DT><A HREF="#lbAK">環境変数</A><DD>
<DT><A HREF="#lbAL">関連項目</A><DD>
<DT><A HREF="#lbAM">ファイル</A><DD>
<DT><A HREF="#lbAN">履歴</A><DD>
<DT><A HREF="#lbAO">入手方法</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 17:04:29 GMT, April 02, 2020
</BODY>
</HTML>
