<HTML>
  <HEAD>
  <META CHARSET="UTF-8"/>
  <META HTTP-QUIV="Content-Type" CONTENT="text/html; charset=UTF-8"/>
  <LINK REL="stylesheet" TYPE="text/css"
	    HREF="../../../../css/jm-draft.css"/>
  <TITLE>Manpage of SFDISK</TITLE>
</HEAD><BODY>
<H1>SFDISK</H1>
Section: System Administration (8)<BR>Updated: June 2015<BR><A HREF="#index">Index</A>
<A HREF="https://github.com/ysatoautonomous/jm-draft/wiki">Return to Main Contents</A><HR>


<A NAME="lbAB">&nbsp;</A>
<H2>名前</H2>


sfdisk - ディスクパーティションテーブルの表示と操作を行う。

<A NAME="lbAC">&nbsp;</A>
<H2>書式</H2>

<B>sfdisk</B>

[options]
<I>device</I>

[<B>-N</B>

<I>partition-number</I>]

<P>
<B>sfdisk</B>

[options]
<I>command</I>


<A NAME="lbAD">&nbsp;</A>
<H2>説明</H2>




<B>sfdisk</B>

はスクリプトベースのツールで、ブロックデバイスのパーティション操作が
できる。
端末から実行された場合、(端末を標準入力として) 対話モードで実行される。
<P>






バージョン 2.26 から
<B>sfdisk</B>

は MBR (DOS), GPT, SUN, SGI ディスクラベルをサポートしているが、
CHS (Cylinder-Head-Sector) アドレス指定をサポートしなくなった。
CHS は Linux では重要でなくなっており、このアドレス指定の考え方は
新しいデバイスでは意味をなさなくなった。
<P>





<B>sfdisk</B>

(バージョン 2.26 以降) は、相対サイズが指定された場合、
またはデフォルト値が使われた場合、またはサイズに乗数のサフィックス
(例えば、MiB) が使われた場合、ブロックデバイスの I/O 制限に
<B>パーティションの開始と終了を揃える。</B>




開始オフセットが厳密にセクタに指定され、かつパーティションサイズが相対値、
または乗数のサフィックスが指定された場合、調整のために、
パーティションサイズが最適化 (縮小または拡大) される。
<P>







推奨される方法は、開始オフセットを全く指定せず、
パーティションサイズを MiB, GiB (など) で指定することである。
この場合、sfdisk は全てのパーティションを
ブロックデバイス I/O 制限に揃える
(もしくは、I/O 制限がとても小さい場合、ディスクレイアウトを他でも
利用できるようにするため、メガバイト境界にされる)。
このデフォルトの挙動が望ましくない場合 (通常はとても小さいパーティションの場合)、
オフセットとサイズをセクタ数で指定する。
この場合、sfdisk は最適化をせずに指定された数値に完全に従う。
<P>






<B>sfdisk</B>

は、
<B><A HREF="../man8/fdisk.8.html">fdisk</A></B>(8)

のようには、SGI と SUN ディスクラベルに対して、
標準的なシステムパーティションを作成しない。
ディスクシステムパーティション全体を含むように、
明示的に全部のパーティションを作成する必要がある。
<P>






<B>sfdisk</B>

は BLKRRPART (パーティションテーブルの再読み込み) ioctl を使い、
デバイスがシステムまたは他のツールで使われていないかを確かめる
(--no-reread を参照)。
この機能または他の sfdisk の操作が、<B>udevd</B> と競合する可能性がある。
衝突の可能性を回避するのに推奨される方法は、<B>--lock</B> を使うことである。
排他ロックを使うと、udevd がデバイスのイベントハンドリングをスキップする可能性がある。
<P>




sfdisk のプロンプトは、ユーザーへのヒントでしかなく、
特にパーティションテーブルに間隙がある場合、
(-N が指定されなければ) 表示されたパーティション番号と同じパーティションエントリが作成される
という意味ではない。
<P>

<A NAME="lbAE">&nbsp;</A>
<H2>コマンド</H2>


コマンドはどれか 1 つしか使用できない。
<DL COMPACT>
<DT>[<B>-N</B> <I>partition-number</I>] <B></B><I>device</I>

<DD>





デフォルトの <B>sfdisk</B> コマンドは、
<I>device</I> について希望するパーティション分割の仕様を、標準入力から読み取り、
その仕様に従ってパーティションテーブルを作成する。
入力フォーマットの説明は下記を参照すること。
標準入力が端末の場合、<B>sfdisk</B> は対話型のセッションを開始する。
<P>



オプション <B>-N</B> が指定されると、
<I>partition-number</I> で指定されたパーティションに変更が適用される。
指定されないパーティションのフィールドは、変更されない。
<P>





使用されていないパーティションを <B>-N</B> で指定できる点に注意すること。
例えば、MBR は常に 4 つのパーティションを持ち、
使用されているパーティションの番号は、小さい方から使われる。
この場合、<B>sfdisk</B> は、<B>-N</B> で指定された使用されていないパーティションについて、
パーティションテーブルからのデフォルト値に従い、
組み込みのデフォルト値を使わない。
<B>--append</B> を参照すること。
<DT><B>-A</B>,<B> --activate </B><I>device </I>[<B></B><I>partition-number...]</I>

<DD>




指定されたパーティションのブート可能フラグをオンにし、
指定されていない全てのパーティションのブート可能フラグを
オフにする。
特別なプレースホルダー '-' はパーティション番号の代わりに使われ、
全てのパーティションのブート可能フラグをオフにする。
<P>


アクティブ化コマンドは、MBR と PMBR のみでサポートされている。
GPT ラベルが検出されると、sfdisk は警告を表示して、
自動的に PMBR に入る。
<P>


<I>partition-number</I> が指定されない場合、
有効化フラグの付いたパーティションのリストを表示する。
<DT><B>--delete </B><I>device </I>[<B></B><I>partition-number</I>...]

<DD>

全てのパーティション、または指定されたパーティションを削除する。
<DT><B>-d</B>,<B> --dump </B><I>device</I>

<DD>


<B>sfdisk</B> の入力として利用可能なフォーマットで、
デバイスのパーティションをダンプする。
<B>パーティションテーブルのバックアップ</B> のセクションを参照すること。
<DT><B>-g</B>,<B> --show-geometry </B>[<B></B><I>device</I>...]

<DD>



全てのパーティション、または指定されたパーティションのジオメトリを
表示する。
後方互換のため、推奨されないオプション <B>--show-pt-geometry</B> は、
このオプションと同じ意味を持つ。
<DT><B>-J</B>,<B> --json </B><I>device</I>

<DD>


デバイスのパーティションを JSON フォーマットでダンプする。
<B>sfdisk</B> は JSON を入力フォーマットとして使えない点に注意すること。
<DT><B>-l</B>,<B> --list </B>[<B></B><I>device</I>...]

<DD>


全てのデバイス、または指定されたデバイスのパーティションを表示する。
このコマンドは、<B>--verify</B> とともに利用できる。
<DT><B>-F</B>,<B> --list-free </B>[<B></B><I>device</I>...]

<DD>

全てのデバイス、または指定されたデバイスのパーティション作成
されていない領域を表示する。
<DT><B>--part-attrs </B><I>device partition-number </I>[<B></B><I>attributes</I>]

<DD>





GPT パーティション属性ビットを変更する。
<I>attributes</I> が指定されない場合、現状のパーティション設定が表示される。
<I>attributes</I> 引き数は、カンマ、またはスペース区切りのビット数字、または
ビット名のリストである。
例えば、&quot;RequiredPartition,50,51&quot; は 3 ビットを設定する。
現状サポートされている属性ビットは以下の通り:
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><B>ビット 0 (RequiredPartition)</B>

<DD>






このビットを設定すると、プラットフォームが機能するために、
このパーティションが必要になる。
パーティションの内容を削除または変更すると、
プラットフォームの機能を損ねたり、プラットフォームの
ブートまたは操作が失敗することを、パーティションの作成者が
示している。
このパーティションを削除すると、システムが正常に機能せず、
このパーティションがシステムのハードウェアの一部として
扱われる。
<DT><B>ビット 1 (NoBlockIOProtocol)</B>

<DD>


EFI ファームウェアにパーティションの内容を無視させ、
読み出しをさせない。
<DT><B>ビット 2 (LegacyBIOSBootable)</B>

<DD>


このパーティションは、昔の BIOS ファームウェアからブート可能である。
<DT><B>ビット 3-47</B>

<DD>



未定義であり、0 にすべきである。
UEFI 仕様の将来の拡張ために予約されている。
<DT><B>ビット 48-63</B>

<DD>





GUID が固有に使用するために予約されている。
これらのビットの使い方は、パーティションタイプによって
変わる。
例えば、Microsoft は、ビット 60 を読み込みのみ、
61 を他のパーティションのシャドーコピー、
62 を隠しパーティション、63 を自動マウント不可を表すのに使っている。
</DL>
</DL>

<P>
<DT><B>--part-label </B><I>device partition-number </I>[<B></B><I>label</I>]

<DD>


GPT パーティション名 (ラベル) を変更する。
<I>label</I> が指定されない場合、現在のパーティションラベルを表示する。
<DT><B>--part-type </B><I>device partition-number </I>[<B></B><I>type</I>]

<DD>


パーティションタイプを変更する。
<I>type</I> が指定されない場合、現在のパーティションタイプを表示する。
<P>


<I>type</I> 引き数は、MBR については 16 進数、GPT については GUID、
タイプの別名 (例えば、&quot;linux&quot;)、タイプのショートカット (例えば、'L') である。


後方互換のため、オプション <B>-c</B> と <B>--id</B> は、
このオプションと同じ意味を持つ。
<DT><B>--part-uuid </B><I>device partition-number </I>[<B></B><I>uuid</I>]

<DD>


GPT パーティションの UUID を変更する。
<I>uuid</I> が指定されない場合、現在のパーティション UUID を表示する。
<DT><B>--disk-id </B><I>device </I>[<B></B><I>id</I>]

<DD>



ディスクの識別子を変更する。
<I>id</I> が指定されない場合、現在の識別子を表示する。
識別子は、GPT の場合は UUID で、MBR の場合は符号なし整数である。
<DT><B>-r</B>,<B> --reorder </B><I>device</I>

<DD>

パーティション番号を開始オフセットの順番に振りなおす。
<DT><B>-s</B>,<B> --show-size </B>[<B></B><I>device</I>...]

<DD>



全てのデバイス、または指定されたデバイスのサイズを、1024 バイトサイズを単位として表示する。
このコマンドは「推奨されず」、
<B><A HREF="../man8/blockdev.8.html">blockdev</A></B>(8)

を使うべきである。
<DT><B>-T</B>,<B> --list-types</B>

<DD>


現在のディスクラベル、または <B>--label</B> で指定されたラベルについて、
全てのサポートされたタイプを表示する。
<DT><B>-V</B>,<B> --verify </B>[<B></B><I>device</I>...]

<DD>

パーティションテーブルとパーティションが正しく見えるかを
テストする。
<DT><B>--relocate </B><I>oper </I><I>device</I>

<DD>

パーティションテーブルヘッダを再配置する。
このコマンドは、現在のところ、GPT ヘッダしかサポートしていない。

引き数 <I>oper</I> は以下の通り:
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><B>gpt-bak-std</B>

<DD>

GPT バックアップヘッダを標準的な場所 (デバイスの最後) に移動する。
<DT><B>gpt-bak-mini</B>

<DD>



GPT バックアップヘッダを最後のパーティションの後ろに移動する。
UEFI 規格では、バックアップヘッダがデバイスの最後に置かれている
必要があり、パーティショニングツールは、規格に従うために、
自動的にヘッダを再配置する点に注意すること。
</DL>
</DL>


</DL>
<A NAME="lbAF">&nbsp;</A>
<H2>オプション</H2>

<DL COMPACT>
<DT><B>-a</B>,<B> --append</B>

<DD>

新しいパーティションテーブルを作成せず、指定したパーティションの
追加のみを行う。
<P>



この場合、使用されていないパーティションが、パーティション
テーブルの最後のパーティションであったとしても、再利用される点に
注意すること。
パーティションテーブルのエントリを指定するには、
<B>-N</B> を参照すること。
<DT><B>-b</B>,<B> --backup</B>

<DD>



パーティション作成を開始する前に、現在のパーティションテーブル
セクタをバックアップする。
デフォルトのバックアップファイル名は ~/sfdisk-&lt;device&gt;-&lt;offset&gt;.bak である。
他の名前を使う場合は、オプション <B>-O</B>, <B>--backup-file</B> を参照すること。
<DT><B>--color</B>[<B>=</B><I>when</I>]

<DD>




出力をカラー表示する。
オプションの引き数 <I>when</I> は、
<B>auto</B>, <B>never</B>, <B>always</B> のいずれかである。
<I>when</I> 引き数が省略された場合、デフォルトは <B>auto</B> である。
カラー表示は無効化できる。
現在の組み込みのデフォルトは、<B>--help</B> の出力を参照すること。
<B>カラー表示</B> セクションも参照すること。
<DT><B>-f</B>,<B> --force</B>

<DD>

全ての整合性チェックを無効化する。
<DT><B>--Linux</B>

<DD>


推奨されず、無視されるオプション。
Linux (と他の現代的な OS) と互換のパーティション作成は、デフォルトである。
<DT><B>--lock</B>[=<I>mode</I>]<DD>






操作するデバイスまたはファイルに、排他 BSD ロックを使う。
オプションの引き数 <I>mode</I> は <B>yes</B>, <B>no</B> (または 1 と 0)
または <B>nonblock</B> である。
<I>mode</I> 引き数が省略された場合、デフォルトは <B>&quot;yes&quot;</B> である。
このオプションは環境変数 <B>$LOCK_BLOCK_DEVICE</B> を上書きする。
デフォルトは、ロックを全く使わないが、
udevd や他のツールとの衝突を避けるため、ロックを使うことを推奨する。
<DT><B>-n</B>,<B> --no-act</B>

<DD>

デバイスに書き込む以外の全てを行う。
<DT><B>--no-reread</B>

<DD>

パーティションテーブルの再読み込み ioctl を使った、
デバイスが使用中か否かのチェックを行わない。
<DT><B>--no-tell-kernel</B>

<DD>



パーティションの変更をカーネルに知らせない。
このオプションは、使用されているディスクのパーティションを
変更する際に、<B>--no-reread</B> とともに使うことが推奨される。
変更されたパーティションは使用 (例えば、マウント) すべきではない。
<DT><B>-O</B>,<B> --backup-file </B><I>path</I>

<DD>


デフォルトのバックアップファイル名を上書きする。
デバイス名とオフセットは常にファイル名に追加される点に注意すること。
<DT><B>--move-data</B>[<B>=</B><I>path</I>]

<DD>




例えば、パーティションの始まりをディスク上で他の場所に移動する
場合などで、パーティションの再配置の後で、データを移動する。
パーティションのサイズは同じでなければならず、
新しい場所と古い場所は重なっても良い。
このオプションは特定の 1 つのパーティションのみを扱うために、
オプション <B>-N</B> が必要である。
<P>




オプションの <I>path</I> にはログファイル名を指定する。
このログファイルは、パーティションデータの読み書き操作の情報を
保持する。
<I>path</I> に単語 &quot;@default&quot; を指定すると、
sfdisk はログとして ~/sfdisk-&lt;devname&gt;.move を使う。
ログは v2.35 以降でオプションとなった。
<P>

この操作は危険を伴い、アトミックでない点に注意すること。
<B>データのバックアップを忘れないこと!</B>
<P>

<B>--move-use-fsync</B> も参照すること。
<P>





以下の例では、最初のコマンドは、最初のパーティションの前に 100MiB の
空き領域を作成し、最初のパーティションが保持するデータ
(例えば、ファイルシステム) を移動する。
2 つ目のコマンドは空き領域に (オフセット 2048 で) 新しいパーティションを作成する。
最後のコマンドは、ディスクの順番に合うようにパーティションを
並べ直す (元の sdc1 は sdc2 になる)。
<DL COMPACT><DT><DD>
<P>
<B>echo '+100M,' | sfdisk --move-data /dev/sdc -N 1</B>

<BR>


<B>echo '2048,' | sfdisk /dev/sdc --append</B>

<BR>

<B>sfdisk /dev/sdc --reorder</B>

<P>
</DL>

<P>
<DT><B>--move-use-fsync</B>

<DD>


<B>--move-data</B> でデータを新しい場所に移動した場合、
書き込み毎に fsync システムコールを使う。
<DT><B>-o</B>,<B> --output </B><I>list</I>

<DD>



どの列を表示するかを指定する。
サポートされている全ての列のリストを見るには、
<B>--help</B>

を使うこと。
<P>


<I>list</I> を (例えば. <B>-o +UUID</B> のように)
<I>+list</I> の形式で指定すると、デフォルトの列のリストを拡張できる。
<DT><B>-q</B>,<B> --quiet</B>

<DD>

余分な情報のメッセージを抑制する。
<DT><B>-u</B>,<B> --unit S</B>

<DD>


推奨されないオプション。
セクタ単位のみがサポートされる。
--show-size コマンドが使われた場合、このオプションはサポートされない。
<DT><B>-X</B>,<B> --label </B><I>type</I>

<DD>






ディスクラベルタイプ (例えば、<B>dos</B>, <B>gpt</B>, ...) を指定する。
このオプションが指定されない場合、<B>sfdisk</B> は既存のラベルをデフォルトとするが、
デバイスにまだラベルがない場合、デフォルトは <B>dos</B> になる。
デフォルト、または現在のラベルはスクリプトヘッダ行 &quot;label: &lt;name&gt;&quot; で上書きできる。
オプション <B>--label</B> を指定した場合、
<B>sfdisk</B> は空のディスクラベルを作成しない
(下記の <B>空のディスクラベル</B> のセクションを参照すること)。
<DT><B>-Y</B>,<B> --label-nested </B><I>type</I>

<DD>


入れ子の (nested) ディスクラベルを強制的に編集する。
プライマリディスクラベルが存在していなければならない。
このオプションは、例えば GPT を持つデバイス上の
ハイブリッド/保護 MBR の編集を可能にする。
<DT><B>-w</B>,<B> --wipe </B><I>when</I>

<DD>










衝突の可能性を避けるため、デバイスからファイルシステム、RAID、
パーティションテーブルシグネチャを消す。
引き数 <I>when</I> は <B>auto</B>, <B>never</B>, <B>always</B> のいずれかである。
このオプションが指定されない場合、デフォルトは <B>auto</B> であり、
シグネチャは対話モードでのみ消すことができる。
引き数 <I>when</I> が <B>never</B> でない場合、
新しいパーティションテーブルを作成する前に、
古いパーティションテーブルのシグネチャが常に消去される点が
例外である。
全ての場合で、新しいパーティションテーブルが作成される前に、
検出されたシグネチャは警告メッセージを出して報告される。
<B><A HREF="../man8/wipefs.8.html">wipefs</A></B>(8)

コマンドも参照すること。
<P>
<DT><B>-W</B>,<B> --wipe-partitions </B><I>when</I>

<DD>









衝突の可能性を避けるため、デバイスからファイルシステム、RAID、
パーティションテーブルシグネチャを消す。
引き数 <I>when</I> は <B>auto</B>, <B>never</B>, <B>always</B> のいずれかである。
このオプションが指定されない場合、デフォルトは <B>auto</B> であり、
シグネチャは対話モードでユーザーが確認した後にのみ
消すことができる。
全ての場合で、新しいパーティションテーブルが作成される前に、
検出されたシグネチャは警告メッセージを出して報告される。
<B><A HREF="../man8/wipefs.8.html">wipefs</A></B>(8)

コマンドも参照すること。
<P>
<DT><B>-v</B>,<B> --version</B>

<DD>

バージョン情報を表示して、終了する。
<DT><B>-h</B>,<B> --help</B>

<DD>

ヘルプを表示して、終了する。
<P>

</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>入力フォーマット</H2>



<B>sfdisk</B>

は 2 つの入力フォーマットとジオメトリヘッダ行をサポートする。
<P>

<B>ヘッダ行</B>

<DL COMPACT><DT><DD>


オプションのヘッダ行は、パーティションテーブルに適用される
ジオメトリ情報を指定する。
ヘッダ行の形式は以下の通り:
<DL COMPACT><DT><DD>
<P>
<B>&lt;name&gt;: &lt;value&gt;</B>

<P>
</DL>


現在、認識できるヘッダは以下の通り:
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><B>unit</B>

<DD>

パーティション作成の単位を指定する。
サポートされている単位は、<B>セクタ</B> のみである。
<DT><B>label</B>

<DD>

パーティションテーブルタイプを指定する。
例えば、<B>dos</B> または <B>gpt</B> である。
<DT><B>label-id</B>

<DD>


パーティションテーブル識別子を指定する。
識別子は、MBR については (0x を前に付けた) 16 進数で、
GPT については MBR である。
<DT><B>first-lba</B>

<DD>

GPT パーティションの最初の利用可能なセクタを指定する。
<DT><B>last-lba</B>

<DD>

GPT パーティションの最後の利用可能なセクタを指定する。
<DT><B>table-length</B>

<DD>

GPT パーティションの最大数を指定する。
<DT><B>grain</B>

<DD>



パーティション配置を計算するために使われる
最小サイズをバイト単位で指定する。
デフォルトは 1MiB であり、デフォルトとして使うことが強く推奨される。
良く分からない場合は、この値を変更しないこと。
<DT><B>sector-size</B>

<DD>



セクタサイズを指定する。
このヘッダは情報を与えるだけで、sfdisk が新しいパーティションテーブルを作成する際には
使われない。
作成の際には、実際のデバイス固有の値が常に使われ、
ダンプから取得したセクタサイズは無視される。
</DL>
</DL>

<P>


入力で指定される最初のパーティションの前に、
ヘッダ行を使うことが可能である点に注意すること。
</DL>

<P>

<B>無名フィールド形式</B>

<DL COMPACT><DT><DD>
<DL COMPACT><DT><DD>
<P>
<I>start size type bootable</I>

<P>
</DL>


ここで各行が 1 つのパーティションディスクリプターに対応する。
<P>






フィールドは、空白、カンマ、セミコロンで区切られ、
空白を続けることができる。
最初と最後の空白は無視される。
数値は 8 進数、10 進数、16 進数のいずれかであり、10 進数がデフォルトである。
フィールドがない場合、空白の場合、'-' が指定された場合、
デフォルト値が使われる。
(1 つのパーティションを変更する) <B>-N</B> オプションが指定された場合、
各フィールドのデフォルト値は、前の値である。
<P>






<I>start</I>

のデフォルト値は、デバイスの I/O 制限に基づいて配置された、
最初のアサインされていないセクタである。
最初のパーティションのデフォルトの開始オフセットは、1 MiB である。
オフセットには乗数のサフィックス (KiB, MiB, GiB, TiB, PiB,
EiB, ZiB, YiB) を付けることができる。
数値はバイト単位のオフセットとして解釈される。
<P>











<I>size</I>

のデフォルト値は「可能か限り大きく」を表す。
つまり、次のパーティションまで、またはデバイスの終わりまでである。
数値の引き数はデフォルトではセクタ数として解釈されるが、
サイズに乗数のサフィックス (KiB, MiB, GiB, TiB, PiB, EiB, ZiB, YiB) を付けると、
数値はバイト単位のパーティションサイズとして解釈され、
デバイスの I/O 制限に基づいて配置される。
数値の代わりに '+' を使うと、パーティションをできる限り拡張する。

既存のパーティションは、必要に応じてリサイズされる。
<P>









パーティションタイプ
<I>type</I>

は、MBR (DOS) については、プレフィックス 0x をオプションとした、16 進数で指定する。
また、GPT については、GUID 文字列で指定する。
もしくは、ショートカット、または別名で指定する。
古いショートカット 'E' と、MBR 16 進数コード '0E' の衝突を避けるため、
MBR の 16 進数コードは 2 文字で指定するのを推奨する。
後方互換のため、sfdisk は、パーティショニングスクリプト内では、
<I>type</I>

がショートカットであるというのを、最初の可能性として考えて、
解釈しようとする。
一方で、他の場所 (例えば、<B>--part-type コマンド</B>) では、
ショートカットであるというのを、最後の可能性として考えて、
解釈しようとする。
<P>


v2.36 以降で libfdisk は、ショートカットの拡張として、パーティションタイプの
別名をサポートするようになった。
別名は、人が読み易い簡単な単語 (例、&quot;linux&quot;) である。
<P>

サポートされるショートカットと別名は、以下の通りである:
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><B>L - 別名 'linux'</B>

<DD>


Linux; MBR では 83 であり、
GPT では 0FC63DAF-8483-4772-8E79-3D69D8477DE4 である。
<DT><B>S - 別名 'swap'</B>

<DD>


スワップ領域; MBR では 82 であり、
GPT では 0657FD6D-A4AB-43C4-84E5-0933C84B4F4F である。
<DT><B>Ex - 別名 'extended'</B>

<DD>



拡張パーティション; MBR では 05 である。
元々のショートカット 'E' は、0x0E MBR パーティションタイプと衝突するので、古い。
<DT><B>H - 別名 'home'</B>

<DD>


ホームパーティション; GPT では 933AC7E1-2EB4-4F13-B844-0E14E2AEF915 である。
<DT><B>U - 別名 'uefi'</B>

<DD>


EFI システムパーティション; MBR では EF であり、
GPT では C12A7328-F81F-11D2-BA4B-00A0C93EC93B である。
<DT><B>R - 別名 'raid'</B>

<DD>


Linux RAID; MBR では FD であり、
GPT では A19D880F-05FC-4D3B-A006-743F0F84911E である。
<DT><B>V - 別名 'lvm'</B>

<DD>


LVM; MBR では 8E であり、
GPT では E6D6D379-F507-44C2-A23C-238F2A3DF928 である。
</DL>
</DL>

<P>





デフォルトの
<I>type</I>

の値は
<I>linux</I>

である。
<P>

Linux 拡張パーティション (85) のショートカット 'X' は古いので、'Ex' を使うべきである。
<P>





<I>bootable</I>

は [<B>*</B>|<B>-</B>] で指定する。
デフォルトではブート可能でない。
このフィールドの値は Linux とは関係ない。
- Linux が稼働しているなら、既にブート済みである -
しかし、このフィールドはある種のブートローダや他の OS で用いられる。
</DL>

<P>

<B>名前付きフィールド形式</B>

<DL COMPACT><DT><DD>



この形式は、より読みやすく、堅牢で、拡張可能で、追加の情報 (例えば、UUID) を指定できる。
スクリプトをより読みやすくするために、この形式を使うことが
推奨される。
<DL COMPACT><DT><DD>
<P>
[<I>device </I><B>:</B>]<I> name</I>[<B>=</B><I>value</I>], ...

<P>
</DL>







<I>device</I>

フィールドはオプションである。
<B>sfdisk</B> はデバイス名からパーティション番号を抽出する。
パーティションをランダムな順番で指定できる。
この機能は主に <B>--dump</B> で使われる。
良く分からない場合は、使わないこと。
<P>




<I>value</I>

はクォーテーションマークの間に指定できる
(例えば name=&quot;This is partition name&quot;)。
現在サポートされているフィールドは以下の通り:
<DL COMPACT><DT><DD>
<DL COMPACT>
<DT><B>start=</B><I>number</I>

<DD>




デバイスの I/O 制限に基づいて配置された、
最初のアサインされていないセクタである。
最初のパーティションのデフォルトの開始オフセットは、1 MiB である。
オフセットには乗数のサフィックス (KiB, MiB, GiB, TiB, PiB,
EiB, ZiB, YiB) を付けることができる。
数値はバイト単位のオフセットとして解釈される。
<DT><B>size=</B><I>number</I>

<DD>



パーティションサイズをセクタ数で指定する。
数値に乗数のサフィックス (KiB, MiB, GiB, TiB, PiB, EiB, ZiB, YiB) を付けると、
数値はバイト単位のサイズとして解釈され、デバイスの I/O 制限に基づいて配置される。
<DT><B>bootable</B>

<DD>

パーティションをブート可能に設定する。
<DT><B>attrs=</B><I>string</I>

<DD>


パーティション属性。通常は GPT パーティション属性ビット。
GPT ビット文字列の形式の詳細は、<B>--part-attrs</B> を参照すること。
<DT><B>uuid=</B><I>string</I>

<DD>

GPT パーティション UUID。
<DT><B>name=</B><I>string</I>

<DD>

GPT パーティション 名。
<DT><B>type=</B><I>code</I>

<DD>



MBR パーティションについては、(0x なしの) 16 進数である。
GPT パーティションについては、GUID である。
無名フィールド形式については、ショートカットである。
後方互換のため、<B>Id=</B> フィールドは同じ意味を持つ。
</DL>
</DL>

</DL>

<P>

<A NAME="lbAH">&nbsp;</A>
<H2>空のディスクラベル</H2>






<B>sfdisk</B>

は、デフォルトでは、パーティションなしではパーティションテーブルを
作成しない。
スクリプトは、デフォルトでは、パーティションを指定した行を想定している。
空のパーティションテーブルを明示的に要求するには、
パーティションの行がない &quot;label: &lt;name&gt;&quot; スクリプトヘッダを指定すればよい。
例えば:
<DL COMPACT><DT><DD>
<P>
<B>echo 'label: gpt' | sfdisk /dev/sdb</B>

<P>
</DL>


で空の GPT パーティションテーブルを作成できる。
<B>--append</B> は、この機能を無効化する点に注意すること。
<P>

<A NAME="lbAI">&nbsp;</A>
<H2>パーティションテーブルのバックアップ</H2>




デバイスのレイアウトを保存することが推奨される。
<B>sfdisk</B>

は 2 つの方法をサポートしている。
<P>



<B>--dump</B> オプションでデバイスレイアウトの記述を
テキストファイルに保存できる。
ダンプ形式は、その後の <B>sfdisk</B> の入力に適している。

例えば:
<DL COMPACT><DT><DD>
<P>
<B>sfdisk --dump /dev/sda &gt; sda.dump</B>

<P>
</DL>


これは、後から以下のようにして復旧できる:
<DL COMPACT><DT><DD>
<P>
<B>sfdisk /dev/sda &lt; sda.dump</B>

</DL>

<P>









パーティションテーブルが格納されている、
全てのセクタの完全な (バイナリ) バックアップをしたい場合、
<B>--backup</B> オプションを使うこと。
このオプションは、セクタに ~/sfdisk-&lt;device&gt;-&lt;offset&gt;.bak ファイルを書き出す。
バックアップファイルのデフォルトの名前は、
<B>--backup-file</B> オプションで変更できる。
バックアップファイルは、<I>device</I> からの生データを保持する。
バックアップファイルの同じ考え方が、
<B><A HREF="../man8/wipefs.8.html">wipefs</A></B>(8)

で使われている点に注意すること。
例えば:
<DL COMPACT><DT><DD>
<P>
<B>sfdisk --backup /dev/sda</B>

<P>
</DL>


GPT ヘッダは、後から以下のようにして復旧できる:
<DL COMPACT><DT><DD>
<P>
<PRE>
<B>dd  if=~/sfdisk-sda-0x00000200.bak  of=/dev/sda  \</B>
<B>  seek=$((0x00000200))  bs=1  conv=notrunc</B>
</PRE>

<P>
</DL>





<B>sfdisk</B> は、バージョン 2.26 以降で、
セクタの復旧に <B>-I</B> オプションを提供しない点に注意すること。
<B><A HREF="../man1/dd.1.html">dd</A></B>(1)

が必要な全ての機能を提供している。
<P>

<A NAME="lbAJ">&nbsp;</A>
<H2>カラー表示</H2>


暗黙のカラー表示は空ファイル <I>/etc/terminal-colors.d/sfdisk.disable</I> で
無効化できる。
<P>






カラー表示設定の詳細は
<B><A HREF="../man5/terminal-colors.d.5.html">terminal-colors.d</A></B>(5)

を参照すること。
<B>sfdisk</B>

でサポートされている論理的なカラー名は以下の通り:
<DL COMPACT>
<DT><B>header</B>

<DD>

出力テーブルのヘッダー。
<DT><B>warn</B>

<DD>

警告メッセージ。
<DT><B>welcome</B>

<DD>

ようこそのメッセージ。
<P>

</DL>
<A NAME="lbAK">&nbsp;</A>
<H2>環境変数</H2>

<DL COMPACT>
<DT>SFDISK_DEBUG=all<DD>

sfdisk デバッグ出力を有効化する。
<DT>LIBFDISK_DEBUG=all<DD>

libfdisk デバッグ出力を有効化する。
<DT>LIBBLKID_DEBUG=all<DD>

libblkid デバッグ出力を有効化する。
<DT>LIBSMARTCOLS_DEBUG=all<DD>

libsmartcols デバッグ出力を有効化する。
<DT>LOCK_BLOCK_DEVICE=&lt;mode&gt;<DD>

排他 BSD ロックを使う。
mode は &quot;1&quot; または &quot;0&quot; である。
より詳細は、<B>--lock</B> を参照すること。
<P>

</DL>
<A NAME="lbAL">&nbsp;</A>
<H2>注意</H2>




バージョン 2.26 以降で <B>sfdisk</B> は、
カーネルにパーティションテーブルを再読み込みさせるための、
<B>-R</B> と <B>--re-read</B> オプションを提供しない。
代わりに <B>blockdev --rereadpt</B> を使うこと。
<P>




バージョン 2.26 以降で <B>sfdisk</B> は、
<B>--DOS</B>, <B>--IBM</B>, <B>--DOS-extended</B>,
<B>--unhide</B>, <B>--show-extended</B>, <B>--cylinders</B>, <B>--heads</B>, <B>--sectors</B>,
<B>--inside-outer</B>, <B>--not-inside-outer</B>
オプションを提供しない。
<P>

<A NAME="lbAM">&nbsp;</A>
<H2>著者</H2>

Karel Zak &lt;<A HREF="mailto:kzak@redhat.com">kzak@redhat.com</A>&gt;
<P>



現在の sfdisk の実装は、オリジナルの Andries E. Brouwer の
sfdisk に基づいている。
<P>

<A NAME="lbAN">&nbsp;</A>
<H2>関連項目</H2>

<B><A HREF="../man8/fdisk.8.html">fdisk</A></B>(8),

<B><A HREF="../man8/cfdisk.8.html">cfdisk</A></B>(8),

<B><A HREF="../man8/parted.8.html">parted</A></B>(8),

<B><A HREF="../man8/partprobe.8.html">partprobe</A></B>(8),

<B><A HREF="../man8/partx.8.html">partx</A></B>(8)

<P>

<A NAME="lbAO">&nbsp;</A>
<H2>入手方法</H2>



sfdisk コマンドは util-linux パッケージの一部であり、
<A HREF="https://www.kernel.org/pub/linux/utils/util-linux/">https://www.kernel.org/pub/linux/utils/util-linux/</A>
から入手できる。
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">名前</A><DD>
<DT><A HREF="#lbAC">書式</A><DD>
<DT><A HREF="#lbAD">説明</A><DD>
<DT><A HREF="#lbAE">コマンド</A><DD>
<DT><A HREF="#lbAF">オプション</A><DD>
<DT><A HREF="#lbAG">入力フォーマット</A><DD>
<DT><A HREF="#lbAH">空のディスクラベル</A><DD>
<DT><A HREF="#lbAI">パーティションテーブルのバックアップ</A><DD>
<DT><A HREF="#lbAJ">カラー表示</A><DD>
<DT><A HREF="#lbAK">環境変数</A><DD>
<DT><A HREF="#lbAL">注意</A><DD>
<DT><A HREF="#lbAM">著者</A><DD>
<DT><A HREF="#lbAN">関連項目</A><DD>
<DT><A HREF="#lbAO">入手方法</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 07:53:53 GMT, February 07, 2021
</BODY>
</HTML>
