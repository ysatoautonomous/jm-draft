<HTML>
  <HEAD>
  <META CHARSET="UTF-8"/>
  <META HTTP-QUIV="Content-Type" CONTENT="text/html; charset=UTF-8"/>
  <LINK REL="stylesheet" TYPE="text/css"
	    HREF="../../../../css/jm-draft.css"/>
  <TITLE>Manpage of CHOOM</TITLE>
</HEAD><BODY>
<H1>CHOOM</H1>
Section: User Commands (1)<BR>Updated: April 2018<BR><A HREF="#index">Index</A>
<A HREF="https://github.com/ysatoautonomous/jm-draft/wiki">Return to Main Contents</A><HR>


<A NAME="lbAB">&nbsp;</A>
<H2>名前</H2>


choom - OOM キラーのスコアーの表示と調整を行う

<A NAME="lbAC">&nbsp;</A>
<H2>書式</H2>

<B>choom</B>

<B>-p</B>

<I>pid</I>

<P>
<B>choom</B>

<B>-p</B>

<I>pid</I>

<B>-n</B>

<I>number</I>

<P>
<B>choom</B>

<B>-n</B>

<I>number</I>

<B>[--]</B>

<I>command&nbsp;</I>[<I>argument</I>...]

<P>

<A NAME="lbAD">&nbsp;</A>
<H2>説明</H2>


<B>choom</B> コマンドは、Out-Of-Memory キラーのスコア設定の表示と調整を行う。
<P>

<A NAME="lbAE">&nbsp;</A>
<H2>オプション</H2>

<DL COMPACT>
<DT><B>-p</B>, <B>--pid</B> <I>pid</I>

<DD>

プロセス ID を指定する。
<DT><B>-n</B>,<B> --adjust </B><I>value</I>

<DD>

調整するスコア値を指定する。
<DT><B>-h</B>, <B>--help</B>

<DD>

ヘルプを表示して、終了する。
<DT><B>-V</B>, <B>--version</B>

<DD>

バージョン情報を表示して、終了する。

</DL>
<A NAME="lbAF">&nbsp;</A>
<H2>注意</H2>



Linux カーネルはメモリ不足 (out of memory) の状況で、
どのプロセスを kill するかを選択するために、不良 (badness) ヒューリスティックを使う。
<P>






不良ヒューリスティックは、どのプロセスを対象にするかを決定するために、
0 (決して kill されない) から 1000 (常に kill される) までの範囲で、
各候補のタスクに値を設定する。
現在のメモリとスワップ使用量の評価に基づいて、プロセスが確保するのに
許可されたメモリの範囲で、単位は大まかな割合に設定される。
例えば、タスクが全ての許可されたメモリを使っている場合、不良スコアは 1000 になる。
タスクが全ての許可されたメモリの半分を使っている場合、不良スコアは 500 になる。
<P>


不良スコアに含まれる追加の要素がある。
現在のメモリとスワップ使用量は、root プロセスでは 3% 差し引かれる。
<P>








「許可された」メモリの総量は、oom キラーが呼ばれるコンテキストに依存する。
確保されたタスクの CPU セットに割り当てられたメモリが使い果たされると、
許可されたメモリは、CPU セットに割り当てられたメモリを表すようになる。
メモリポリシー (mempolicy) のノードが使い果たされると、
許可されたメモリは、メモリポリシーノードのセットになる。
メモリ制限 (またはスワップ制限) に到達した場合、
許可されたメモリは、設定された制限になる。
最後に、全体システムがメモリ不足になると、許可されたメモリは、
全ての確保されたリソースを表すようになる。
<P>






不良スコアがどのタスクを kill するかを決定するかに使われる前に、
調整スコア値が不良スコアに追加される。
受け入れられる値の範囲は、-1000 から +1000 である。
oom キラーが常にあるタスクを選ぶか、全く選ばないかのいずれかに、
ユーザ空間の指向を二極化できる。
利用可能な下限値 -1000 の場合、常に不良スコアを 0 にするので、
そのタスクについて oom キラーを完全に無効化する。
<P>





調整スコアの値を +500 に設定されると、例えば、
同じシステム、CPU セット、メモリポリシー、メモリコントローラリソースを共有する
残りのタスクが、50% 以上のメモリを使うことを許可するのと大まかに同じである。
一方で、調整スコアの値を -500 に設定すると、
タスクのスコアとして考慮されたメモリを、50% 差し引くのと大まかに同じである。
<P>

<A NAME="lbAG">&nbsp;</A>
<H2>著者</H2>

<PRE>
Karel Zak &lt;<A HREF="mailto:kzak@redhat.com">kzak@redhat.com</A>&gt;
</PRE>


<A NAME="lbAH">&nbsp;</A>
<H2>関連項目</H2>

<B><A HREF="../man5/proc.5.html">proc</A></B>(5)


<A NAME="lbAI">&nbsp;</A>
<H2>入手方法</H2>





<B>choom</B> コマンドは util-linux パッケージの一部であり、

Linux Kernel Archive

から入手できる。
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">名前</A><DD>
<DT><A HREF="#lbAC">書式</A><DD>
<DT><A HREF="#lbAD">説明</A><DD>
<DT><A HREF="#lbAE">オプション</A><DD>
<DT><A HREF="#lbAF">注意</A><DD>
<DT><A HREF="#lbAG">著者</A><DD>
<DT><A HREF="#lbAH">関連項目</A><DD>
<DT><A HREF="#lbAI">入手方法</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 16:19:42 GMT, January 14, 2021
</BODY>
</HTML>
