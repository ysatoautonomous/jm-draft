<HTML>
  <HEAD>
  <META CHARSET="UTF-8"/>
  <META HTTP-QUIV="Content-Type" CONTENT="text/html; charset=UTF-8"/>
  <LINK REL="stylesheet" TYPE="text/css"
	    HREF="../../../../css/jm-draft.css"/>
  <TITLE>Manpage of e2fsck.conf</TITLE>
</HEAD><BODY>
<H1>e2fsck.conf</H1>
Section: File Formats (5)<BR>Updated: February 2012<BR><A HREF="#index">Index</A>
<A HREF="https://github.com/ysatoautonomous/jm-draft/wiki">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>名前</H2>

e2fsck.conf - e2fsck の設定ファイル
<A NAME="lbAC">&nbsp;</A>
<H2>説明</H2>

<I>e2fsck.conf</I> は <B><A HREF="../man8/e2fsck.8.html">e2fsck</A></B>(8) の設定ファイルである。 このファイルにより <B><A HREF="../man8/e2fsck.8.html">e2fsck</A></B>(8) が ext2,
ext3, ext4 ファイルシステムを チェックする際のデフォルトの動作を制御できる。
<P>


<I>e2fsck.conf</I> ファイルでは INI 形式のフォーマットが使用される。 節 (stanza) または最上位のセクションは、角括弧: [ ]
で区切られる。 各セクション内では、各行でリレーションが定義され、 タグに値を割り当てたり、タグにサブセクションを割り当てたりする。
サブセクションには、更にリレーションとサブセクションが含まれる。 この設定ファイルで使用される INI 方式のフォーマットの例は、以下の通り:
<P>

<BR>&nbsp;&nbsp;[section1]
<BR>

<BR>&nbsp;&nbsp;tag1&nbsp;=&nbsp;value_a
<BR>

<BR>&nbsp;&nbsp;tag1&nbsp;=&nbsp;value_b
<BR>

<BR>&nbsp;&nbsp;tag2&nbsp;=&nbsp;value_c
<P>

<BR>&nbsp;&nbsp;[section&nbsp;2]
<BR>

<BR>&nbsp;&nbsp;tag3&nbsp;=&nbsp;{
<BR>

<BR>&nbsp;&nbsp;subtag1&nbsp;=&nbsp;subtag_value_a
<BR>

<BR>&nbsp;&nbsp;subtag1&nbsp;=&nbsp;subtag_value_b
<BR>

<BR>&nbsp;&nbsp;subtag2&nbsp;=&nbsp;subtag_value_c
<BR>

<BR>&nbsp;&nbsp;}
<BR>

<BR>&nbsp;&nbsp;tag1&nbsp;=&nbsp;value_d
<BR>

<BR>&nbsp;&nbsp;tag2&nbsp;=&nbsp;value_e
<BR>

<BR>&nbsp;&nbsp;}
<P>

コメントは、先頭のセミコロン (';') または ハッシュ ('#') 文字で区切られ、行末文字で終わる。
<P>

タグと値にスペースが含まれる場合は、ダブルクォートで括らなければならない。
ダブルクォートで括った文字列内では、標準的なバックスラッシュの解釈が適用される:
&quot;\n&quot; (改行文字), &quot;\t&quot; (タブ文字), &quot;\b&quot; (バックスペース文字),
&quot;\\&quot; (バックスラッシュ文字)。
<P>

以下の節が <I>e2fsck.conf</I> ファイルで使用されている。 これらの節は、このドキュメントの後のセクションでより詳しく説明される。
<DL COMPACT>
<DT><I>[options]</I><DD>
この節には <B>e2fsck</B> の動作についての一般的な設定パラメータが含まれる。
<DT><I>[problems]</I><DD>
この節では、e2fsck が様々なファイルシステムの 不整合をどのように扱うかを、管理者が再設定できる。
<DT><I>[scratch_files]</I><DD>
この節では e2fsck が必要なメモリ量を減らすためにスクラッチファイル (scratch file) を使う場合の設定を行う。
</DL>
<A NAME="lbAD">&nbsp;</A>
<H2>[options] 節</H2>

以下のリレーションが <I>[options]</I> 節で定義できる。
<DL COMPACT>
<DT><I>allow_cancellation</I><DD>
このリレーションにブール値 true を設定すると、 ユーザーは ^C で e2fsck を停止することができる。
ファイルシステムには、エラーが含まれていることを示す フラグが明示的に設定されず、e2fsck は終了する。 終了ステータスは 32 ではなく 0
となる。 この設定はデフォルトでは false である。
<DT><I>accept_time_fudge</I><DD>
ハードウェアクロックがより適切でエラーに強い UTC
時間ではなく、ローカル時間で設定されるというWindowsの不幸なデザイン選定により、不幸なことに、e2fsckが実行される際にシステムクロックが不正になるという状況に多くのユーザが見舞われてしまう。
<DT><DD>
歴史的にいくつかのディストリビューションでは、init
スクリプトにバグがあったり、インストーラがこのようなケースを検知でできなかったり、適切な対策が打たれていない場合がある。しかも、init
スクリプトで努力しているにも関わらず、インストーラの作者がこのような間違い設定を検知できていなかったり、仮想化マネージャにバグがあったり間違い設定があったり、インストーラがインストール過程でネットワークタイムサーバにアクセスしないといった可能性がある。そのため、デフォルトでスーパーブロックの時間を、24時間までごまかす
(fudge up) ことができる。これは <I>accept_time_fudge</I> 設定をブール値 false
に設定することで可能になる。この設定はデフォルトでは true である。
<DT><I>broken_system_clock</I><DD>
<B><A HREF="../man8/e2fsck.8.html">e2fsck</A></B>(8) プログラムはシステムクロックが正しいと仮定するいくつかのヒューリスティック (heuristic)
な方法を持っている。さらに、多くのシステムプログラムも同様の仮定をしている。例えば UUID ライブラリは UUID (universal unique
identifier: 汎システム的に他とは重ならない識別子)
を発行することを保証するために、時間が巻き戻らないことに依存している。しかし、特に組み込みシステムでは、システムクロックが壊れている場合がある。e2fsck
はこのリレーションが true の場合、時刻が信用できないと仮定するヒューリスティックな方法を使って、時刻ベースのチェックをスキップする。このブール値を
true に設定すると、e2fsck はシステムクロックが信用できないと常に仮定する。
<DT><I>clear_test_fs_flag</I><DD>
このブール値のリレーションにより、システム上で ext4 ファイルシステムが利用可能である場合、<B><A HREF="../man8/e2fsck.8.html">e2fsck</A></B>(8) が test_fs
をクリアするか否かを設定できる。デフォルトは true である。
<DT><I>defer_check_on_battery</I><DD>
このブール値のリレーションにより、システムがバッテリーで動作している時に、 (時間またはマウント回数に基づいた) ファイルシステムの検査の周期を 2
倍にするか否かを設定できる。 デフォルトは true である。
<DT><I>indexed_dir_slack_percentage</I><DD>
<B><A HREF="../man8/e2fsck.8.html">e2fsck</A></B>(8)
がインデックス付けされたディレクトリを再パッキングする際に、指定されたパーセントの各リーフノードの空きスペースを予約する。これにより、リーフノードを分割せずに数個の新しいエントリをディレクトリに追加することが可能になり、ディレクトリの平均充填率をより高めにして効率的なレベルに保つことができる。このリレーションはデフォルトで
20% である。
</DL>
<A NAME="lbAE">&nbsp;</A>
<H2>[problems] 節</H2>

<I>[problems]</I> 節の各タグには、先頭に &quot;0x&quot; を付けた 6 個の 16 進数で、問題コードを指定する。 タグの値はサブセクションである。
そのサブセクションにおけるリレーションは、 指定した問題コードのデフォルトの処理を上書きする。
<P>

この節の設定が不適切であると、 <B>e2fsck</B> の動作が不正になったり、クラッシュすることもある。
大部分の管理者は、ソースコードを参照せずに、この節を変更すべきではない。
<P>

問題コードのサブセクションでは、以下のタグが使用される:
<DL COMPACT>
<DT><I>description</I><DD>
このリレーションは、ファイルシステムの不整合が 検出された時に表示されるメッセージを上書きする。
<DT><I>preen_ok</I><DD>
このブール値のリレーションは、 <B>e2fsck</B> を修復 (preen) モードで動作させているときに、
ファイルシステムの問題を自動的に修復するかについての デフォルトの動作を上書きする。
<DT><I>no_ok</I><DD>
このブール値のリレーションは、 報告された問題の修正をユーザーが拒否した場合に、 ファイルシステムに不整合のマークを付けるかについての
デフォルトの動作を上書きする。
<DT><I>no_default</I><DD>
このブール値のリレーションは、 問題 (または質問) のデフォルトの答えを &quot;no&quot; に上書きする。
<DT><I>preen_nomessage</I><DD>
このブール値のリレーションは、 <B>e2fsck</B> を修復 (preen) モードで動作させているときに、
ファイルシステムの問題の説明を非表示にするかについての デフォルトの動作を上書きする。
<DT><I>no_nomsg</I><DD>
このブール値のリレーションは、問題の修正を行わないようになっている場合に、 ファイルシステムの問題の説明を非表示にするかのデフォルトの動作を上書きする。
問題の修正を行わないようになるのは、 <B>e2fsck</B> が <B>-n</B> オプション付きで実行された場合か、 <I>force_no</I>
フラグがセットされている場合のいずれかである。
<DT><I>force_no</I><DD>
このブール値のオプションを true に設定すると、問題の修正を全く行わないようになる。 つまり、この問題を修正するかという質問に対してユーザが
'no' と答えた場合と同じになる。 コマンドラインで指定された <B>-y</B> よりも <I>force_no</I> オプションが優先される場合もある
(もちろん、特定の問題の場合だけだが)。
</DL>
<A NAME="lbAF">&nbsp;</A>
<H2>[scratch_files] 節</H2>

<I>[scratch_files]</I> 節では以下のリレーションが定義されている。
<DL COMPACT>
<DT><I>directory</I><DD>
このリレーションで指定された名前のディレクトリが存在し、かつ書き込み可能な場合、 e2fsck
はメモリ上のデータ構造を使う代わりにスクラッチファイルを格納するのにこのディレクトリを使おうとする。
<DT><I>numdirs_threshold</I><DD>
このリレーションが設定された場合、ファイルシステムのディレクトリ数が指定された値よりも少ない場合、メモリ上のデータ構造が使用される。
<DT><I>dirinfo</I><DD>
このリレーションは、 ディレクトリ情報を保持するのに、 メモリ上のデータ構造ではなくスクラッチファイルディレクトリを使用するかどうかを制御する。
デフォルトは true である。
<DT><I>icount</I><DD>
このリレーションは、inode 数を追跡するのに、 メモリ上のデータ構造ではなくスクラッチファイルディレクトリを使用するかを制御する。 デフォルトは
true である。
</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>例</H2>

以下の例では、ファイルシステムに孤立したファイルがある場合に、 ブートプロセスで e2fsck がアボートしないようにする。
(もちろん、これが常に良い考えという訳ではない。 システムのセキュリティに必要で非常に重要なファイルが、 lost+found
に置かれているような場合に、 システム管理者が初めにチェックせずにシステムを開始してしまうのは、 危険だろう。)
<P>

<BR>

<BR>&nbsp;&nbsp;[problems]
<BR>

<BR>&nbsp;&nbsp;0x040002&nbsp;=&nbsp;{
<BR>

<BR>&nbsp;&nbsp;preen_ok&nbsp;=&nbsp;true
<BR>

<BR>&nbsp;&nbsp;description&nbsp;=&nbsp;&quot;@u&nbsp;@i&nbsp;%i.&nbsp;&nbsp;&quot;
<BR>

<BR>&nbsp;&nbsp;}
<A NAME="lbAH">&nbsp;</A>
<H2>ファイル</H2>

<DL COMPACT>
<DT><I>/etc/e2fsck.conf</I><DD>
<B><A HREF="../man8/e2fsck.8.html">e2fsck</A></B>(8)  の設定ファイル。
</DL>
<A NAME="lbAI">&nbsp;</A>
<H2>関連項目</H2>

<B><A HREF="../man8/e2fsck.8.html">e2fsck</A></B>(8)
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">名前</A><DD>
<DT><A HREF="#lbAC">説明</A><DD>
<DT><A HREF="#lbAD">[options] 節</A><DD>
<DT><A HREF="#lbAE">[problems] 節</A><DD>
<DT><A HREF="#lbAF">[scratch_files] 節</A><DD>
<DT><A HREF="#lbAG">例</A><DD>
<DT><A HREF="#lbAH">ファイル</A><DD>
<DT><A HREF="#lbAI">関連項目</A><DD>
</DL>
<HR>
This document was created by
<A HREF="/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 18:50:56 GMT, March 26, 2020
</BODY>
</HTML>
